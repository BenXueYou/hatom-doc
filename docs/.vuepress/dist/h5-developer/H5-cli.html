<!-- 用于开发环境的 HTML 模板文件 -->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title></title>
</head>

<body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Hatom移动应用开发</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.npmjs.com/package/hatom2-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://hatom2.hikyun.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hatom平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.npmjs.com/package/hatom2-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://hatom2.hikyun.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hatom平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/product-introduction/production-introduction.html" class="sidebar-link">产品介绍</a></li><li><a href="/quick-start/quick-start.html" class="sidebar-link">快速上手</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/app-build/app-build" class="sidebar-heading clickable"><span>应用构建</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/h5-developer/H5-developer" class="sidebar-heading clickable open"><span>H5应用开发</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/h5-developer/H5-cli.html" aria-current="page" class="active sidebar-link">hatom2-cli脚手架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#模板" class="sidebar-link">模板</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#使用规范" class="sidebar-link">使用规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#公共组件" class="sidebar-link">公共组件</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#全局方法、全局正则" class="sidebar-link">全局方法、全局正则</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#全局过滤器" class="sidebar-link">全局过滤器</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#布局" class="sidebar-link">布局</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#页面缓存" class="sidebar-link">页面缓存</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#路由动画" class="sidebar-link">路由动画</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#雪碧图的使用" class="sidebar-link">雪碧图的使用</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#路由模式" class="sidebar-link">路由模式</a></li><li class="sidebar-sub-header"><a href="/h5-developer/H5-cli.html#业务配置" class="sidebar-link">业务配置</a></li></ul></li></ul></li><li><a href="/h5-developer/H5-spa.html" class="sidebar-link">单页面应用</a></li><li><a href="/h5-developer/H5-mpa.html" class="sidebar-link">多页面应用</a></li><li><a href="/h5-developer/H5-cli-instruction.html" class="sidebar-link">H5开发说明</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/h5-developer/H5-api" class="sidebar-heading clickable"><span>基础插件</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/h5-developer/H5-debug" class="sidebar-heading clickable"><span>开发调试</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/example/example" class="sidebar-heading clickable"><span>开发案例</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/problem1.html" class="sidebar-link">常见问题</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hatom2-cli"><a href="#hatom2-cli" class="header-anchor">#</a> hatom2-cli</h1> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>需要：<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>(&gt;=10.12.0), and npm version 6.4.1+, &lt;7.0.</p> <p>全局安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g hatom2-cli

$ hatom -V 
<span class="token number">2.0</span>.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>非全局安装：</p> <div class="language-ssh line-numbers-mode"><pre class="language-text"><code>npx install hatom2-cli

$ npx hatom -V
2.0.0

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看版本</span>
hatom -V/--version

<span class="token comment"># 帮助信息</span>
hatom -help

<span class="token comment"># 查看所有模板</span>
hatom list

<span class="token comment"># 工程初始化</span>
hatom init <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>project<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>使用前请安装git,并配置username以及邮箱</p></blockquote> <h2 id="模板"><a href="#模板" class="header-anchor">#</a> 模板</h2> <p>当前提供四种工程模板：</p> <ul><li><a href="https://gitee.com/hatom/hatom-spa-tpl" target="_blank" rel="noopener noreferrer">spa-tpl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> —— 基于webapck5+vue2的hatom单页应用模板</li> <li><a href="https://gitee.com/hatom/hatom-spa-demo" target="_blank" rel="noopener noreferrer">spa-demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> —— 基于spa-tpl模板搭建的单页应用demo</li> <li><a href="https://gitee.com/hatom/hatom-mpa-tpl" target="_blank" rel="noopener noreferrer">mpa-tpl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> —— 基于webapck5+vue2搭建的多页应用模板</li> <li><a href="https://gitee.com/hatom/hatom-mpa-demo" target="_blank" rel="noopener noreferrer">mpa-demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> —— 基于mpa-tpl模板搭建的多页应用demo</li></ul> <blockquote><p>模板使用示例见
<a href="./helpDocument?source=H5-spa">单页面应用</a> <a href="./helpDocument?source=H5-mpa">多页面应用</a></p></blockquote> <h2 id="使用规范"><a href="#使用规范" class="header-anchor">#</a> 使用规范</h2> <p><a href="#cli-1">公共组件</a></p> <p><a href="#cli-2">全局方法、全局正则</a></p> <p><a href="#cli-3">全局过滤器</a></p> <p><a href="#cli-4">布局</a></p> <p><a href="#cli-5">页面缓存</a></p> <p><a href="#cli-6">路由动画</a></p> <p><a href="#cli-7">雪碧图的使用</a></p> <p><a href="#cli-8">路由模式</a></p> <p><a href="#cli-9">业务配置</a></p> <p><a href="#cli-10">webApp.json</a></p> <p><span id="cli-1"></span></p> <h3 id="公共组件"><a href="#公共组件" class="header-anchor">#</a> 公共组件</h3> <p>全局新增公共组件请放置于src/components/下，采用kebab-case（短横线命名），组件结构采用统一的形式，并在src/components/index.js文件中进行注册。eg:</p> <p>tabbar组件</p> <p>组件结构:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>├── i-tabbar ························ tabbar组件文件夹 
│   ├── index.js ···················· install方法
│   └── src ························· 组件业务逻辑文件夹
│       └── i-tabbar.vue ············ 组件业务逻辑
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>i-tabbar.vue:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i-tabbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'ITabbar'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.i-tabbar</span> <span class="token punctuation">{</span>
  ...
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>index.vue:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> ITabbar <span class="token keyword">from</span> <span class="token string">'./src/i-tabbar.vue'</span>
ITabbar<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>ITabbar<span class="token punctuation">.</span>name<span class="token punctuation">,</span> ITabbar<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ITabbar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>最后在src/components/index.js文件中进行注册:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> ITabbar <span class="token keyword">from</span> <span class="token string">'./i-tabbar/index.js'</span>
<span class="token keyword">const</span> components <span class="token operator">=</span> <span class="token punctuation">[</span>  
  ITabbar
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i-tabbar</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i-tabbar</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><span id="cli-2"></span></p> <h3 id="全局方法、全局正则"><a href="#全局方法、全局正则" class="header-anchor">#</a> 全局方法、全局正则</h3> <p>全局方法、全局正则可以分别添加于src/components/utils/util.js文件和src/components/utils/reg文件中，这样，在任意vue文件中即可通过this.$+方法名/正则名直接调用。eg:</p> <p>使用:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$isMobie</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token constant">EMAIL_TEST</span><span class="token punctuation">(</span><span class="token string">'support.hikyun@hikvision.com'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><span id="cli-3"></span></p> <h3 id="全局过滤器"><a href="#全局过滤器" class="header-anchor">#</a> 全局过滤器</h3> <p>在src/filters/filter.js中可以注册vue全局过滤器，spa-tpl模板中，使用<a href="https://www.npmjs.com/package/dayjs" target="_blank" rel="noopener noreferrer">dayjs(2KB)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>默认添加了timeFormat时间格式转换，将时间格式转换为YYYY-MM-DD HH:mm:ss形式。eg:</p> <p>使用:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ new Date() | timeFormat }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><span id="cli-4"></span></p> <h3 id="布局"><a href="#布局" class="header-anchor">#</a> 布局</h3> <p>应用中通用布局可以放置于src/layouts文件夹中，再在src/router.js路由配置中通过子路由的形式使用添加好的布局，从而提高代码的复用，spa-tpl模板提供了两种布局，layout1常用的导航栏+内容+tabbar布局，layout2为导航栏+内容布局。eg:</p> <p>src/router/index.js:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Layout1 <span class="token keyword">from</span> '@<span class="token operator">/</span>src<span class="token operator">/</span>layouts<span class="token operator">/</span>layout1
<span class="token keyword">import</span> Page1 <span class="token keyword">from</span> <span class="token string">'@/src/page/page1/index'</span>

staticRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/page1'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'layout1'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Layout1<span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'/page1'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'page1'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'page1'</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> Page1
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><span id="cli-5"></span></p> <h3 id="页面缓存"><a href="#页面缓存" class="header-anchor">#</a> 页面缓存</h3> <p>PC端的分页是采用页码的形式，而移动端多采用上拉加载、下拉刷新的形式，在点击列表进入详情页面再返回的时候，如果不进行页面缓存，不仅需要重新请求资源（在需要流量付费的场景下简直无法容忍），而且列表页面也回到了最开始的第一条的位置，这时如果还想紧接上次查看的地方继续往下，就需要不断滑动，直到滑动到上次的位置，当数据量多的时候可能再也回不到上一次查看的位置了。试想一下你们刷今日头条的场景吧。
因此，在移动端开发的时候，需要对页面进行缓存。我们这里采用vue的内置组件<a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noopener noreferrer">keep-alive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，提供了一种通用的实现页面缓存的方案，当然，也有很多其他的方案，比如<a href="https://github.com/hezhongfeng/vue-page-stack/blob/HEAD/README.zh-cn.md" target="_blank" rel="noopener noreferrer">vue-page-stack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 请开发者根据实际场景自行评估，这里不再赘述。下面将介绍hatom如何用keep-alive组件实现页面缓存:</p> <p>src/layouts/layout1.vue:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;keep-alive :include='whiteList' :exclue='blackList'&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
  &lt;/keep-alive&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  data () {
    return {
      whiteList: [],
      blackList: []
    }
  },
  watch: {
     $route: {
        immediate: true,
        handler (newRoute, oldRoute) {
          if (newRoute.meta.cache) {
            this.whiteList = Array.from(new Set([newRoute.name, ...this.whiteList]))
            this.blackList = this.blackList.filter((name) =&gt; name !== newRoute.name)
          } else {
            this.whiteList = this.whiteList.filter((name) =&gt; name !== newRoute.name)
            this.blackList = Array.from(new Set([newRoute.name, ...this.blackList]))
          }
        }
     }
  }
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>src/router/index.js:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>cache <span class="token operator">=</span> to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>cache <span class="token operator">||</span> <span class="token boolean">true</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>记录页面位置,src/pages/page1/index.vue:</p> <div class="language-javacript line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;page1&quot;&gt;&lt;/div&gt;
&lt;/templage&gt;
&lt;script&gt;
export default {
  name: 'page1',
  data () {
    return {
      scrollTop: 0
    }  
  },
  beforeRouteLeave (to, from, next) {
    this.scrollTop = document.querySelector('.page1').scrollTop
    next()
  },
  activated () {
    document.querySelector('.page1').scrollTop = this.scrollTop;
  }
}

&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>使用:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/page1'</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> cache<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><span id="cli-6"></span></p> <h3 id="路由动画"><a href="#路由动画" class="header-anchor">#</a> 路由动画</h3> <p>如果想提升用户体验，最好在页面切换的过程中加上过渡动画。同样，我们也提供了一种实现路由动画的的方案，你要做的只是一些简单的配置。在我们的方案中，由浅层级的页面过渡到深层级的页面，采用从右至左的过渡方式，相反，采用从左至右的过渡方案，具体配置如下：</p> <p>src/router/index.js</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 在meta标签中配置页面层级，如：</span>
<span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">'/index'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> Index<span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{</span> deep<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">'/page1'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'page1'</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> Page1<span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{</span> deep<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在全局路由守卫中，根据deep,动态设置全局变量$directon</span>
router<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$direction <span class="token operator">=</span> to<span class="token punctuation">.</span>meta <span class="token operator">&gt;=</span> from<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>deep <span class="token operator">?</span> <span class="token string">'left'</span> <span class="token operator">:</span> <span class="token string">'right'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>在使用<code>&lt;router-view&gt;</code>的地方，添加<code>&lt;transition&gt;</code>动画，如在src/App.vue中：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;transition :name=&quot;$direction&quot;&gt;&lt;router-view&gt;&lt;/router-view&gt;&lt;/transition&gt;
  &lt;/div&gt;
&lt;/template&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>设置动画样式，在src/assets/styles/animation.css中：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/** 左飞入 */</span>
<span class="token selector">.left-enter</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.left-enter-to</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.left-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/** 右飞入 */</span>
<span class="token selector">.right-enter</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.right-enter-to</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.right-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> 0.3s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><span id="cli-7"></span></p> <h3 id="雪碧图的使用"><a href="#雪碧图的使用" class="header-anchor">#</a> 雪碧图的使用</h3> <p>将一些小图标制作成一张雪碧图，是一个比较好的主意。多亏了<a href="https://www.npmjs.com/package/webpack-spritesmith" target="_blank" rel="noopener noreferrer">webpack-spritesmith<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>插件，我们在此基础上进行了一些封装和配置，使雪碧图制作和使用非常方便。你需要做的就是：</p> <p>1、将图标文件例如arrow-left.png拖动到/src/assets/icons文件件内</p> <p>2、在需要使用的地方引入<code>&lt;i class=&quot;icon-arrow-left&gt;&lt;/i&gt;</code></p> <p>确实只需要如此简单的两步。hatom会将/src/assets/icons文件夹内的所有文件，制作成雪碧图sprite.png并放置于src/assets/images文件夹内，同事生成相关的定位样式sprite.css放置于src/assets/styles中。</p> <p><span id="cli-8"></span></p> <h3 id="路由模式"><a href="#路由模式" class="header-anchor">#</a> 路由模式</h3> <p>vue支持hash和history两种模式的路由配置，但基于某些原因，hatom只能支持hash模式的路由配置，否则会达不到预期的结果。</p> <p><span id="cli-9"></span></p> <h3 id="业务配置"><a href="#业务配置" class="header-anchor">#</a> 业务配置</h3> <p>在src/config目录中，可以进行一些全局变量的配置：</p> <ul><li><p>api.js 配置接口地址，如在api.js配置 BAIDU:'https://www.baidu.com', 可以在任意vue文件中通过<code>this.$BAIDU</code>引用</p></li> <li><p>constant.js 配置全局常量,如配置SHEIGHT:screen.height，通过<code>this.SHEIGHT</code>引用，建议常量使用大写字母命名</p></li> <li><p>http.js axios全局拦截器，可以在<code>request.interceptors.request</code>和<code>request.interceptors.response</code>进行相关业务的配置，如鉴权方面的操作等</p></li> <li><p>webApp.json 是app的相关设置，具体参数可以说明可以参考<a href="#cli-9">webApp.json</a></p></li></ul> <p><span id="cli-9"></span></p> <h4 id="webapp-json"><a href="#webapp-json" class="header-anchor">#</a> webApp.json</h4> <p>webApp.json文件是应用相关的设置，一般在脚手架生成项目时与package.json保持一致，但也可以手动进行设置，相关参数为：</p> <table><thead><tr><th>参数</th> <th>说明</th> <th>类型</th> <th>默认配置</th></tr></thead> <tbody><tr><td>h5packCode</td> <td>包名</td> <td>String</td> <td>-</td></tr> <tr><td>versionName</td> <td>版本号</td> <td>String</td> <td>1.0.0</td></tr> <tr><td>author</td> <td>作者</td> <td>String</td> <td>support.hikyun@hikvision.com</td></tr> <tr><td>description</td> <td>描述</td> <td>String</td> <td>A hatom project</td></tr> <tr><td>updateTime</td> <td>单元格</td> <td>String</td> <td>项目创建时间</td></tr> <tr><td>androidMinNativeVersion</td> <td>安卓版本号</td> <td>Sting</td> <td>1.0.0</td></tr> <tr><td>iOSMinNativeVersion</td> <td>iOS版本号</td> <td>String</td> <td>1.0.0</td></tr> <tr><td>url</td> <td>应用远程地址，&quot;&quot;为本地加载，可自定义调试工具</td> <td>String</td> <td></td></tr> <tr><td>componentId</td> <td>插件集</td> <td>Array</td> <td>[&quot;componentId1&quot;, &quot;componentId2&quot;]</td></tr> <tr><td>menuList</td> <td>门户组件 菜单项配置</td> <td>Array</td> <td>[]</td></tr> <tr><td>ext</td> <td>拓展字段</td> <td>Object</td> <td>{}</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/app-build/cloud-compile.html" class="prev">
        云编译
      </a></span> <span class="next"><a href="/h5-developer/H5-spa.html">
        单页面应用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
</body>

</html>